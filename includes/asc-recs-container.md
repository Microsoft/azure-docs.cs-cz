---
author: memildin
ms.service: security-center
ms.topic: include
ms.date: 03/14/2021
ms.author: memildin
ms.custom: generated
ms.openlocfilehash: 4a03a36f098035db1a91b4516dedb6a303aa41d2
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/20/2021
ms.locfileid: "103466162"
---
V této kategorii je **24** doporučení.

|Doporučení |Description |Závažnost |
|---|---|---|
|V Azure Defenderu by se měly povolit Registry kontejnerů. |K vytváření zabezpečených kontejnerových úloh zajistěte, aby obrázky, na kterých jsou založené, nejsou známými chybami zabezpečení.<br>Azure Defender pro Registry kontejneru vyhledá v registru chyby zabezpečení u jednotlivých nabízených imagí kontejneru a zpřístupňuje podrobné nálezy na bitovou kopii.<br>Pokud chcete zlepšit stav zabezpečení vašich kontejnerů a chránit je před útoky, povolte v Azure Defenderu Registry kontejnerů.<br><br>Důležité: Oprava toto doporučení bude mít za následek poplatky za ochranu registrů kontejnerů. Pokud v tomto předplatném nemáte žádné Registry kontejnerů, neúčtují se žádné poplatky.<br>Pokud v budoucnu vytvoříte v tomto předplatném nějaké Registry kontejnerů, budou automaticky chráněny a v této době začnou platit poplatky.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-container-registry-integration'>Přečtěte si další informace o Azure Defenderu pro Registry kontejnerů.</a><br />(Související zásady: [měly by být povolené Azure Defender pro Registry kontejnerů](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2fc25d9a16-bc35-4e15-a7e5-9db606bf9ed4).) |Vysoká |
|Je potřeba povolit Azure Defender pro Kubernetes. |Azure Defender pro Kubernetes poskytuje ochranu před hrozbami v reálném čase pro vaše kontejnerová prostředí a generuje výstrahy pro podezřelé aktivity.<br>Pomocí těchto informací můžete rychle opravit problémy se zabezpečením a vylepšit zabezpečení kontejnerů.<br><br>Důležité: Oprava toto doporučení bude mít za následek poplatky za ochranu vašich clusterů Kubernetes. Pokud v tomto předplatném nemáte žádné clustery Kubernetes, neúčtují se žádné poplatky.<br>Pokud v budoucnu vytvoříte v tomto předplatném všechny clustery Kubernetes, budou automaticky chráněny a v tomto čase začnou platit poplatky.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-kubernetes-service-integration'>Přečtěte si další informace o Azure Defenderu pro Kubernetes.</a><br />(Související zásady: [měl by být povolený Azure Defender pro Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2f523b5cd1-3e23-492f-a539-13118b6d1e3a).) |Vysoká |
|V clusterech by měl být nainstalovaný a povolený Azure Policy doplněk pro Kubernetes. |Azure Policy doplněk pro Kubernetes rozšiřuje <a target="_blank" href="https://github.com/open-policy-agent/gatekeeper">Server Gatekeeper</a> v3, Webhook kontroleru pro přístup k <a target="_blank" href="https://www.openpolicyagent.org/">otevřenému agentu zásad</a> (neprů), který se použije při vynuceném škálování a ochraně vašich clusterů v centralizovaném, konzistentním způsobem.<p>Security Center vyžaduje, aby doplněk mohl auditovat a vymáhat možnosti zabezpečení a dodržování předpisů v rámci svých clusterů. <a target="_blank" href="https://docs.microsoft.com/azure/governance/policy/concepts/policy-for-kubernetes">Další informace</a></p><p>Vyžaduje Kubernetes v 1.14.0 nebo novější.</p><br />(Související zásady: [na clustery by měly být nainstalované a povolené doplňky pro Azure Policy Kubernetes (AKS)](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0a15ec92-a229-4763-bb14-0ea34a568f8d).) |Vysoká |
|Měla by se vyhovět omezení procesoru a paměti kontejneru. |Vynucení limitů procesoru a paměti zabraňuje útokům na vyčerpání prostředků (což je forma útoku na útok typu denial of Service).<p>Doporučujeme nastavit limity pro kontejnery, abyste zajistili, že modul runtime brání kontejneru v používání více než nakonfigurovaného limitu prostředků.</p><br />(Související zásady: [zajistěte, aby limity prostředků procesoru a paměti kontejneru nepřesáhly zadané limity v clusteru Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe345eecc-fa47-480f-9e88-67dcc122b164)). |Střední |
|Image kontejneru by se měly nasadit jenom z důvěryhodných registrů. |Image běžící v clusteru Kubernetes by měly pocházet ze známých a monitorovaných registrů imagí kontejneru. Důvěryhodné Registry omezují riziko ohrožení vaší clusterů tím, že omezují možnosti zavedení neznámých ohrožení zabezpečení, problémů se zabezpečením a škodlivých imagí.<br />(Související zásady: [zajištění jenom povolených imagí kontejneru v clusteru Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffebd0533-8e55-448f-b837-bd0e06f16469)) |Vysoká |
|Registry kontejneru by měly být zašifrované pomocí klíče spravovaného zákazníkem (CMK) |Pomocí klíčů spravovaných zákazníkem můžete spravovat šifrování v klidovém obsahu registrů. Ve výchozím nastavení jsou data v klidovém stavu zašifrovaná pomocí klíčů spravovaných službou, ale klíče spravované zákazníkem (CMK) se běžně vyžadují ke splnění standardů dodržování legislativních předpisů. CMKs povolí šifrování dat pomocí Azure Key Vaultho klíče vytvořeného a vlastněného vámi. Máte plnou kontrolu a zodpovědnost za životní cyklus klíčů, včetně rotace a správy. Další informace o šifrování CMK najdete na adrese https://aka.ms/acr/CMK .<br />(Související zásady: [Registry kontejneru by měly být zašifrované pomocí klíče spravovaného zákazníkem (CMK)](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5b9159ae-1701-4a6f-9a7a-aa9c8ddd0580)) |Střední |
|Registry kontejneru by neměly umožňovat neomezený přístup k síti. |Služba Azure Container Registry ve výchozím nastavení přijímá připojení přes Internet z hostitelů v jakékoli síti. Chcete-li chránit své Registry před potenciálními hrozbami, povolte přístup pouze z určitých veřejných IP adres nebo rozsahů adres. Pokud váš registr nemá pravidlo IP/firewall nebo nakonfigurovanou virtuální síť, zobrazí se ve špatných prostředcích. Další informace o Container Registry síťových pravidel najdete tady: https://aka.ms/acr/portal/public-network a tady https://aka.ms/acr/vnet .<br />(Související zásady: [Registry kontejneru by neměly umožňovat neomezený přístup k síti](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fd0793b48-0edc-4296-a390-4c75d1bdfd71).) |Střední |
|Registry kontejneru by měly používat privátní odkaz |Privátní odkaz Azure umožňuje připojit virtuální síť ke službám Azure bez veřejné IP adresy ve zdroji nebo cíli. Platforma privátních odkazů zpracovává připojení mezi klientem a službami přes páteřní síť Azure. Mapováním privátních koncových bodů na Registry kontejnerů místo celé služby budete chráněni také před riziky úniku dat. Další informace najdete tady: https://aka.ms/acr/private-link .<br />(Související zásady: [Registry kontejneru by měly používat privátní odkaz](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe8eef0a8-67cf-4eb4-9386-14b0e78733d4)) |Střední |
|Je třeba zabránit kontejneru s eskalací oprávnění. |Kontejnery by se neměly spouštět s eskalací oprávnění do kořenového adresáře v clusteru Kubernetes.<br>Atribut AllowPrivilegeEscalation určuje, zda může proces získat více oprávnění, než je jeho nadřazený proces.<br />(Související zásady: [clustery Kubernetes by neměly umožňovat eskalaci oprávnění kontejneru](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1c6e92c9-99f0-4e55-9cf2-0c234dc48f99)) |Střední |
|Kontejnery sdílející závislé obory názvů hostitele by se měly vyhnout |Chcete-li chránit proti eskalaci oprávnění mimo kontejner, vyhněte se přístupu pod přístupem k citlivým oborům názvů hostitele (ID hostitelského procesu a hostiteli IPC) v clusteru Kubernetes.<br />(Související zásady: [kontejnery clusteru Kubernetes by neměly sdílet ID hostitelského procesu ani obor názvů hostitele IPC](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f47a1ee2f-2a2a-4576-bf2a-e0e36709c2b8)) |Střední |
|Kontejnery by měly naslouchat jenom povoleným portům. |Pokud chcete omezit plochu pro útok na váš cluster Kubernetes, omezte přístup ke clusteru omezením přístupu kontejnerů k nakonfigurovaným portům.<br />(Související zásady: [zajistěte, aby kontejnery naslouchaly jenom na povolených portech v clusteru Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f440b515e-a580-421e-abeb-b159a61ddcbc)) |Střední |
|Neměnné (jen pro čtení) kořenový systém souborů by měl být vynutil pro kontejnery. |Kontejnery by se měly spouštět pomocí kořenového systému souborů určeného jen pro čtení v clusteru Kubernetes. Neproměnlivý systém souborů chrání kontejnery před změnami v době běhu a do cesty přidávají škodlivé binární soubory.<br />(Související zásady: [kontejnery clusteru Kubernetes by se měly spouštět s kořenovým systémem souborů jen pro čtení](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fdf49d893-a74c-421d-bc95-c663042e5b80)) |Střední |
|Clustery Kubernetes by měly být přístupné jenom přes protokol HTTPS |Použití protokolu HTTPS zajišťuje ověřování a ochranu dat při přenosu z útoků z odposlouchávání síťové vrstvy. Tato funkce je v současnosti všeobecně dostupná pro Kubernetes službu (AKS) a ve verzi Preview pro modul AKS a Azure ARC s povoleným Kubernetes. Další informace najdete na https://aka.ms/kubepolicydoc<br />(Související zásady: [vynutil příchozí přenos HTTPS v clusteru Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1a5b4dca-0b6f-4cf5-907c-56316bc1bf3d)) |Vysoká |
|Server API pro správu služeb Kubernetes Services by měl být nakonfigurovaný s omezeným přístupem. |Aby se zajistilo, že budou mít přístup k vašemu clusteru jenom aplikace z povolených sítí, počítačů nebo podsítí, omezte přístup k vašemu serveru Kubernetes rozhraní API pro správu služeb. Přístup můžete omezit definováním autorizovaných rozsahů IP adres nebo nastavením serverů rozhraní API jako soukromých clusterů, jak je vysvětleno v tématu <a target='_blank' href=https://docs.microsoft.com/azure/aks/private-clusters>https://docs.microsoft.com/azure/aks/private-clusters</a> .<br />(Související zásady: [rozsahy povolených IP adres by měly být definované v Kubernetes Services](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0e246bcf-5f6f-4f87-bc6f-775d4712c7ea)) |Vysoká |
|Služby Kubernetes by se měly upgradovat na nezranitelnou Kubernetes verzi. |Upgradujte cluster služby Kubernetes na novější verzi Kubernetes, abyste chránili před známými chybami zabezpečení ve vaší aktuální verzi Kubernetes. Chyba zabezpečení <a target='_blank' href='https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9946'>CVE-2019-9946</a> byla opravena ve verzích Kubernetes verze 1.11.9 +, 1.12.7 +, 1.13.5 + a 1.14.0 +<br />(Související zásady: [služby Kubernetes by měly být upgradovány na nezranitelnou verzi Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffb893a29-21bb-418c-a157-e99480ec364c).) |Vysoká |
|Pro kontejnery by se měly vyhovět aspoň privilegované možnosti pro Linux. |Chcete-li omezit prostor pro útoky vašeho kontejneru, omezte možnosti systému Linux a udělte kontejnerům specifická oprávnění bez udělení všech oprávnění pro uživatele root. Doporučujeme odstranit všechny možnosti a pak přidat ty, které jsou potřeba.<br />(Související zásady: [kontejnery clusteru Kubernetes by měly používat jenom povolené možnosti](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fc26596ff-4d70-4e6a-9a30-c2506bd2f80c)) |Střední |
|Přepsání nebo zakázání profilu kontejnerů AppArmor by mělo být omezené. |Kontejnery běžící v clusteru Kubernetes by měly být omezené jenom na povolené profily AppArmor.<br>; AppArmor (Application obraně) je modul zabezpečení pro Linux, který chrání operační systém a jeho aplikace před bezpečnostními hrozbami. Pokud ho chcete použít, správce systému přidruží profil zabezpečení AppArmor každému programu.<br />(Související zásady: [kontejnery clusteru Kubernetes by měly používat jenom povolené profily AppArmor](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f511f5417-5d12-434d-ab2e-816901e72a5e)) |Vysoká |
|Měly by se vyhnout privilegovanému kontejneru |Aby nedocházelo k neomezenému přístupu hostitele, vyhněte se privilegovaným kontejnerům, pokud je to možné<p>Privilegované kontejnery mají všechny kořenové možnosti hostitelského počítače. Je možné je použít jako vstupní body pro útoky a rozšířit škodlivý kód nebo malware na ohrožené aplikace, hostitele a sítě.</p><br />(Související zásady: [Nepovolit privilegované kontejnery v clusteru Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f95edb821-ddaf-4404-9732-666045e056b4)) |Střední |
|Pro služby Kubernetes by se měly používat Access Control Role-Based. |K zajištění podrobného filtrování akcí, které mohou uživatelé provádět, použijte Role-Based Access Control (RBAC) ke správě oprávnění v clusterech služby Kubernetes a ke konfiguraci relevantních zásad autorizace. Další informace najdete v tématu <a target='_blank' href='https://docs.microsoft.com/azure/aks/concepts-identity#role-based-access-controls-rbac'>řízení přístupu na základě role v Azure</a>.<br />(Související zásady: [Access Control na základě rolí (RBAC) by se měly používat na služby Kubernetes Services](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fac4a19c2-fa67-49b4-8ae5-0b2e78c49457)) |Vysoká |
|Spuštění kontejnerů jako kořenový uživatel by se mělo vyhnout. |Kontejnery by se měly spouštět jako nekořenové uživatele v clusteru Kubernetes. Spuštění procesu jako kořenový uživatel v kontejneru spouští jako kořen na hostiteli. V případě ohrožení má útočník kořen v kontejneru a všechny chybné konfigurace se snáze zneužije.<br />(Související zásady: [Kubernetes clustery a kontejnery by se měly spouštět jenom s ID schváleného uživatele a skupiny](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ff06ddb64-5fa3-4b77-b166-acb36f7f6042)) |Vysoká |
|Služby by měly naslouchat jenom povoleným portům. |Pokud chcete omezit plochu pro útok na cluster Kubernetes, omezte přístup ke clusteru tím, že omezíte přístup služeb k nakonfigurovaným portům.<br />(Související zásady: [zajistěte, aby se služby naslouchaly jenom na povolených portech v clusteru Kubernetes](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f233a2a17-77ca-4fb1-9b6b-69223d272a44)) |Střední |
|Používání hostitelských sítí a portů by se mělo omezit. |Omezte přístup pod přístup k hostitelské síti a povolený rozsah portů hostitele v clusteru Kubernetes. Lusky vytvořené s povoleným atributem hostNetwork budou sdílet síťové místo uzlu. Aby se zabránilo napadení kontejneru před sledováním síťového provozu, nedoporučujeme do sítě hostitele umístit své lusky. Pokud potřebujete vystavit port kontejneru v síti uzlu a použití portu uzlu služby Kubernetes nevyhovuje vašim potřebám, je další možností zadat hostPort pro kontejner ve specifikaci pod.<br />(Související zásady: [Kubernetes clustery by měly používat jenom schválené hostitelské sítě a rozsah portů](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f82985f06-dc18-4a48-bc1c-b9f4f0098cfe)) |Střední |
|Použití HostPath svazků připojení by se mělo omezit na známý seznam, aby se omezil přístup k uzlu z ohrožených kontejnerů. |Doporučujeme, abyste v clusteru Kubernetes omezili HostPath připojení svazku na nakonfigurované povolené cesty hostitele. V případě ohrožení by se měl omezit přístup k uzlu kontejneru z kontejnerů.<br />(Související zásady: [cluster Kubernetes pod svazky hostPath by měl používat jenom povolené cesty hostitele](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f098fc59e-46c7-4d99-9b16-64990e543d75)) |Střední |
|Ohrožení zabezpečení v Azure Container Registry imagí by se mělo opravit (používá se Qualys). |Posouzení ohrožení zabezpečení imagí kontejneru vyhledává chyby zabezpečení v registru a zpřístupňuje podrobné nálezy jednotlivých imagí. Řešení ohrožení zabezpečení může významně zlepšit stav zabezpečení vašich kontejnerů a chránit je před útoky.<br />(Související zásady: [chyby zabezpečení v Azure Container Registrych imagí by měly být opraveny](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5f0f936f-2f01-4bf5-b6be-d423792fa562)) |Vysoká |
|||
