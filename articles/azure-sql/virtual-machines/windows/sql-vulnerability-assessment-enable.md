---
title: Posouzení ohrožení zabezpečení SQL pro SQL Server na virtuálních počítačích Azure
description: Popisuje posouzení ohrožení zabezpečení SQL pro SQL Server databáze běžící na Azure Virtual Machines.
services: virtual-machines-windows
author: MashaMSFT
ms.service: virtual-machines-sql
ms.subservice: security
ms.topic: conceptual
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 12/02/2020
ms.author: mathoma
ms.openlocfilehash: 817203b8e795ce15c8c48c18bc7b9a46217dc93a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/19/2021
ms.locfileid: "97356702"
---
# <a name="sql-vulnerability-assessment-for-sql-server-on-azure-vms"></a>Posouzení ohrožení zabezpečení SQL pro SQL Server na virtuálních počítačích Azure
[!INCLUDE[appliesto-sqlvm](../../includes/appliesto-sqlvm.md)]

Posouzení ohrožení zabezpečení SQL (VA) představuje snadno nakonfigurovanou službu, která může zjišťovat, sledovat a pomáhat při nápravě potenciálních ohrožení zabezpečení databáze. Využijte ji k proaktivnímu zlepšení zabezpečení databáze pro váš SQL Server na virtuálních počítačích Azure. 

Posouzení ohrožení zabezpečení je součástí nabídky [Azure Defender pro SQL](../../database/azure-defender-for-sql.md) , což je jednotný balíček pro pokročilé funkce zabezpečení SQL. K posouzení ohrožení zabezpečení se dá využít a spravovat prostřednictvím centrálního portálu Azure Defenderu pro SQL Portal nebo prostřednictvím Azure Security Center. 

## <a name="overview"></a>Přehled

Posouzení ohrožení zabezpečení SQL (VA) je služba, která poskytuje přehled o stavu zabezpečení. Posouzení ohrožení zabezpečení zahrnuje akční kroky pro řešení problémů se zabezpečením a vylepšení zabezpečení databáze. Může vám to usnadnit: 

- Splnění požadavků na dodržování předpisů, které vyžadují sestavy kontroly databáze. 
- Splnění standardů ochrany osobních údajů. 
- Monitorujte dynamické databázové prostředí, kde je obtížné sledovat změny. 

Posouzení ohrožení zabezpečení je skenovací služba, která využívá znalostní bázi pravidel, která označují bezpečnostní hrozby. Zvýrazňuje odchylky od osvědčených postupů, jako jsou například nepřesné konfigurace, nadměrné oprávnění a nechráněná citlivá data. 

Tato pravidla jsou založená na osvědčených postupech Microsoftu a zaměřuje se na problémy zabezpečení, které představují největší rizika pro vaši databázi a jejich cenná data. Zahrnují problémy na úrovni databáze a problémy se zabezpečením na úrovni serveru, jako jsou nastavení brány firewall serveru a oprávnění na úrovni serveru. Tato pravidla také reprezentují mnohé z požadavků různých regulativních orgánů pro splnění standardů dodržování předpisů. 

Výsledky kontroly zahrnují akční kroky k vyřešení jednotlivých problémů a v případě potřeby vám poskytnou přizpůsobené skripty pro nápravu. Můžete přizpůsobit sestavu posouzení pro vaše prostředí nastavením přijatelného směrného plánu pro: 

- Konfigurace oprávnění 
- Konfigurace funkcí 
- Nastavení databáze 

## <a name="enable-sql-va"></a>Povolit SQL VA

Povolte Azure Defender pro servery SQL na počítačích pro implementaci posouzení ohrožení zabezpečení. 

Pokud chcete používat Azure Defender pro SQL Server, postupujte takto:

1. [Instalace rozšíření agenta SQL IaaS](sql-agent-extension-manually-register-single-vm.md)
1. [Povolit automatické zřizování agenta Log Analytics](../../../security-center/security-center-enable-data-collection.md#auto-provision-mma)
1. [Povolit nepovinný plán Security Center](../../../security-center/defender-for-sql-usage.md#step-2-enable-the-optional-plan-in-security-centers-pricing-and-settings-page)

Vzhledem k tomu, že posouzení ohrožení zabezpečení je součástí programu Azure Defender pro SQL, je po povolení služby Azure Defender na vašem virtuálním počítači vaše databáze automaticky kontrolována každých 12 hodin, aby bylo možné identifikovat slabá místa zabezpečení. Výsledky jsou odesílány do Azure Security Center pro centralizované agregované zobrazení podstaty SQL chráněné službou Azure Defender pro SQL. 

> [!NOTE]
> Kontrola je nenáročná, bezpečná, je možné spustit pouze několik sekund na jednu databázi a je výhradně určena jen pro čtení. Neprovádí žádné změny v databázi. 

## <a name="view-report"></a>Zobrazit sestavu

Sestava databáze představuje přehled stavu zabezpečení. Zobrazuje počet zjištěných problémů a jejich příslušné závažnost. Výsledky zahrnují upozornění na odchylky od osvědčených postupů a snímek nastavení souvisejících se zabezpečením, jako jsou například objekty zabezpečení databáze a role a jejich přidružená oprávnění.  

Chcete-li zobrazit sestavu, postupujte podle následujících kroků:

1. V Azure Portal přejít na [Azure Security Center](https://ms.portal.azure.com/#blade/Microsoft_Azure_Security/SecurityMenuBlade/0) .
1. V nabídce **Obecné** vyberte **doporučení** : 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/recommendations-in-security-center.png" alt-text="Přejít na doporučení v části nastavení v Azure Security Center z Azure Portal":::

1. Posuňte se dolů k doporučení a rozbalte možnost **opravit slabá místa**.
1. **V počítačích by se měly opravit výsledky posouzení ohrožení zabezpečení na vašich serverech SQL na počítačích**. 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/report-in-security-center.png" alt-text="Zobrazit sestavu v okně doporučení Azure Security Center":::

Tato stránka zobrazuje agregovaná ohrožení zabezpečení zjištěná pro všechny SQL Server virtuální počítače v rámci předplatného. 


## <a name="analyze-results"></a>Analýza výsledků

Zkontrolujte výsledky a Identifikujte zjištění v sestavě, které jsou ve vašem prostředí skutečnými problémy zabezpečení. Pokud chcete zjistit dopad hledání a proč se jednotlivá kontrola zabezpečení nezdařila, přejděte k podrobnostem každého neúspěšného výsledku.  

:::image type="content" source="media/sql-vulnerability-assessment-enable/sample-report.png" alt-text="Zkontrolujte výsledky a Identifikujte zjištění v sestavě, které jsou ve vašem prostředí skutečnými problémy zabezpečení.":::

## <a name="set-baseline"></a>Nastavit směrný plán 

Při kontrole výsledků hodnocení můžete výsledky označit jako přijatelné standardní hodnoty ve vašem prostředí. Směrný plán je v podstatě přizpůsobením způsobu hlášení výsledků. Výsledky, které se shodují se směrným plánem, se považují za při následné kontrole. Po vytvoření směrného plánu zabezpečení vyhodnocování ohrožení zabezpečení pouze hlásí pouze odchylky ze směrného plánu. Tímto způsobem můžete zaměřit pozornost na relevantní problémy. 

:::image type="content" source="media/sql-vulnerability-assessment-enable/analyze-report-for-details.png" alt-text="Při kontrole výsledků hodnocení můžete výsledky označit jako přijatelné standardní hodnoty ve vašem prostředí.":::

## <a name="export-results"></a>Export výsledků

Pomocí funkce [průběžného exportu](../../../security-center/continuous-export.md) Azure Security Center můžete exportovat výsledky posouzení ohrožení zabezpečení do centra událostí Azure nebo do pracovního prostoru Log Analytics. 


## <a name="next-steps"></a>Další kroky

Další informace najdete v tématu [posouzení ohrožení zabezpečení SQL v Azure SQL](../../database/sql-vulnerability-assessment.md)a [Ochrana dat SQL pomocí Azure Security Center](../../../security-center/security-center-introduction.md).

